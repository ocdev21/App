
apiVersion: v1
kind: ConfigMap
metadata:
  name: l1-app-config
  namespace: l1-app
data:
  NODE_ENV: "production"
  PORT: "5000"
  CLICKHOUSE_URL: "http://clickhouse-service.l1-app.svc.cluster.local:9000"
  CLICKHOUSE_HOST: "clickhouse-service.l1-app.svc.cluster.local"
  CLICKHOUSE_PORT: "9000"
  CLICKHOUSE_DATABASE: "l1_anomaly_detection"
  CLICKHOUSE_USER: "default"
  CLICKHOUSE_USERNAME: "default"
  CLICKHOUSE_PASSWORD: ""
  TSLAM_REMOTE_HOST: "10.193.0.4"
  TSLAM_REMOTE_PORT: "8080"
  JUPYTER_SERVICE_URL: "http://jupyter-service.l1-app.svc.cluster.local:8888"
---
apiVersion: v1
kind: Secret
metadata:
  name: l1-app-secrets
  namespace: l1-app
type: Opaque
data:
  # Add any sensitive data here (base64 encoded)
  database_password: ""
  jupyter_token: bDEtYW5hbHlzaXMtdG9rZW4=  # l1-analysis-token in base64
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: l1-app-code
  namespace: l1-app
data:
  package.json: |
    {
      "name": "l1-troubleshooting",
      "version": "1.0.0",
      "scripts": {
        "start": "node server/index.js",
        "build": "npm run build:client && npm run build:server",
        "build:client": "cd client && npm run build",
        "build:server": "tsc -p server/tsconfig.json"
      },
      "dependencies": {
        "express": "^4.18.2",
        "ws": "^8.13.0"
      }
    }
